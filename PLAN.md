# Первоначальный план решения задачи

1. Выделение границ детектором Кэнни.
2. Определение границ стола.
* Поскольку в ТЗ требовалось, неформально говоря, чтобы все линии стола были прямыми и стол занимал определенную значительную часть кадра, распознавание стола можно произвести с помощью преобразования Хафа (детектора прямых): будем искать все прямые и выбирать из них относительно вертикальные и горизонтальные (допустимые отклонения указаны в ТЗ) длины, не менее заданной (так же указана в ТЗ).
* В ТЗ указано требование к однородности фона, соответственно, в результате выделения границ не должны быть обнаружены ложные ножки или столешницы, которые сузят размеры стола либо внесут неопределённость.
Предметы на фоне, такие как горизонтальные балки (в кадре отображаются наклонными) и прочие не будут ложно распознаны ввиду размеров либо ориентации.

3. Определение границ стула

Данный пункт является наиболее сложным для реализации. Я предлагаю использовать разные стратегии для распознавания стула в разных положениях:
* для поиска стула, который стоит вертикально, достаточно найти сидение как горизонтальный отрезок (или несколько отрезков, допуски на горизонтальность указаны в ТЗ), к которому на хотя бы одном его краю присоеднияется вертикальный отрезок (одна ножка стула должна быть прямой), а на другом краю присоединяется некоторая другая белая линия, касательная к которой направлена условно вертикально. Эта линия является линией спинки. Также присоединяются другие линии, определяющие границы сидения, однако они не представляют интереса (свойства перспективного преобразования позволяют утверждать, что дальняя граница спинки стула априорно будет не длиннее передней, соответственно, нет смысла тратить вычислительные ресурсы на её обнаружение, следовательно не нужны и дальние линии сидения, которые примыкают к спинке). Возможно, стоит попробовать использовать детектор Харриса для обнаружения особых точек и сопоставить найденные им данные с обнаруженными линиями спинки (граница спинки -- особая точка), однако каких-либо строгих критериев, устанвливающих соответствие этой линии и особых точек пока предложить не могу
* для поиска стула, расположенного вдоль оси, направленной в камеру, предлагаю использовать следующий алгоритм. Находим границы седалища: две вертикальные и две горизонтальные линии. К стыкам верхней/нижней горизонтальной и правой вертикальной линии должны также присоединяться некоторые кривые l1, l2 -- они соответствуют спинке стула. Лишним подтверждением того, что найденные кривые l1 и l2 соответствуют спинке будет тот факт, что конец этих линий соединён вертикальным отрезком (понятие "конец нужно уточнить уже опытным путем -- сделать некоторый допуск по позиции точки крепления перекладины, соединяющей вертикальные опоры спинки: уже хотя бы на приведенном фото отчетливо видно, что спинка кончается чуть дальше упомянутой перекладины)
	Отличие для случаев, когда стул повернут вокруг оси, смотрящей в камеру -- точка крепления вертикальных опор спинки к седалищу (не право верх и право низ, а право низ и лево низ, либо лево низ и лево верх, либо лево верх и право верх). Всё остальное остаётся в силе.
	По приведенным выше описаниям понятно, что ориентация стула в пространстве определяется вполне одназчно: можно заметить, что накладываемые условия для всех случаев разные, соответственно, последовательная проверка всех комбинаций позволит определить ориентацию стула.

4. Принятие решения: пролезет или не пролезет.
* Если стул стоит вертикально -- ищем пересечение спинки и столешницы. Если пересечение найдено, ответ нет. Иначе да
* Если стул лежит (сидение находится в плоскости, параллельной фокальной плоскости камеры) -- определяем, что выше -- верхняя горизонтальная граница сидения или столешница. Если первое, ответ нет. Иначе -- да. 
